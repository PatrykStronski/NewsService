# News Service
Меня зовут Патрик Строньский и это моя имполементация News Service реализован как тестовое задание для компании NeoTech

# Архитектура
Сервис сделан используя docker-compose. Сделан используя два контейнера, где первый заключает в себе сервис (сделан используя NestJs) а второй базу данных PostgreSQL. 

# Как запустить
Чтобы запустить сервис достаточно исользовать две команды:

Чтобы построить контейнера:
```$ docker-compose build```

Чтобы запустить сервис:
```$ docker-compose up```

# Как тестировать
Во первых, автоматически создаётся первый пользователь. Его email это "admin@admin.admin" а его пароль "admin". Он используется для входа в систему. Сначала надо получить токен для входа в систему а позже можно использовать обычное апи.

## Получение кода авторизации
Во первых, для входа в систему надо получить код авторизации. Чтобы его получить Надо отправить запрос на `http://localhost:3000/auth/token`
Тело запроса: `{ email: 'admin@admin.admin', password: 'admin' }`. Код будет виден в терминале где запущенное NestJS приложение. Его надо скопировать. Позже надо отправить запрос на: `http://localhost:3000/auth/token`
Тело запроса: `{ email: 'admin@admin.admin', password: 'admin' code: '<код из терминала для данного пользователя>'}`
В ответ отправляется токен и токен обновления (refresh token).

## Получение обновления токена
Чтобы получить обновленный токен надо отправить запрос на: `http://localhost:3000/auth/refresh`
Токен обновления (refresh token) получается вместе со стандартным токеном.
Тело запроса: `{ email: 'admin@admin.admin', refresh: <refresh token> }`

